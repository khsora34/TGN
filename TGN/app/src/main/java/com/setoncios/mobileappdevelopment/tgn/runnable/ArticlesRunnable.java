package com.setoncios.mobileappdevelopment.tgn.runnable;

import android.net.Uri;
import android.util.Log;

import com.setoncios.mobileappdevelopment.tgn.models.RunnableConstants;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class ArticlesRunnable implements Runnable {
    private static final String TAG = "ArticlesRunnable";

    private final ArticlesObservable observable;
    private final String sourceId;

    public ArticlesRunnable(ArticlesObservable articlesObservable, String sourceId) {
        this.observable = articlesObservable;
        this.sourceId = sourceId;
    }

    @Override
    public void run() {
        runOnline();
    }

    private void runOnline() {
        Uri uri = Uri.parse(RunnableConstants.baseUrl + RunnableConstants.headlineRelativeUrl)
                .buildUpon()
                .appendQueryParameter(RunnableConstants.sourcesParameter, this.sourceId)
                .appendQueryParameter(RunnableConstants.apiKeyParameter, RunnableConstants.apiKey)
                .build();
        String urlString = uri.toString();
        StringBuilder builder = new StringBuilder();
        try {
            URL url = new URL(urlString);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("GET");
            connection.addRequestProperty("User-Agent", "");
            connection.connect();
            if (connection.getResponseCode() != HttpURLConnection.HTTP_OK) {
                this.observable.onArticlesError();
                return;
            }
            InputStream stream = connection.getInputStream();
            BufferedReader reader = new BufferedReader(new InputStreamReader(stream));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
            this.observable.onArticlesLoaded(builder.toString());
            Log.d(TAG, "run: Json contents: " + builder.toString());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void runCached() {
        //String response = "{\"status\":\"ok\",\"totalResults\":10,\"articles\":[{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"La nueva edad de oro de la construcción: casi 10.000 empresas más entre la euforia y el fantasma de la burbuja\",\"description\":\"Cuando la burbuja inmobiliaria de 2008 vivía sus últimos destellos de esplendor, Leandro Flores, su hermano y otro socio lanzaron una empresa de revestimientos en Cortegana...\",\"url\":\"https://www.elmundo.es/economia/vivienda/2021/11/20/61968a6a21efa0141b8b45a8.html\",\"publishedAt\":\"2021-11-20T17:04:38Z\",\"content\":\"Actualizado Sábado,\\r\\n20\\r\\nnoviembre\\r\\n2021\\r\\n-\\r\\n18:04\\r\\nCuando la burbuja inmobiliaria de 2008 vivía sus últimos destellos de esplendor, Leandro Flores, su hermano y otro socio lanzaron una empresa de re… [+9048 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"Sánchez defiende que con un \\\"mínimo esfuerzo\\\" en las cotizaciones se sostendrán y aumentarán las pensiones\",\"description\":\"El presidente del Gobierno, Pedro Sánchez, justificó este sábado el acuerdo con los sindicatos para incrementar una décima las cotizaciones sociales de los trabajadores...\",\"url\":\"https://www.elmundo.es/espana/2021/11/20/61990d5721efa0bf6f8b457f.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/d9ef9d55a4f6f807ecc39fcd0f03bca0/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/20/16374202483445.jpg\",\"publishedAt\":\"2021-11-20T14:59:46Z\",\"content\":\"El presidente del Gobierno, Pedro Sánchez, justificó este sábado el acuerdo con los sindicatos para incrementar una décima las cotizaciones sociales de los trabajadores remarcando que \\\"con ese mínimo… [+661 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"La CUP ratifica su enmienda a la totalidad al proyecto de Presupuestos del Govern\",\"description\":\"La portavoz de la CUP en el Parlament, Eulàlia Reguant, ha anunciado que la formación anticapitalista ratifica la enmienda a la totalidad al proyecto de Presupuestos de la...\",\"url\":\"https://www.elmundo.es/cataluna/2021/11/20/6198f463fdddff0e0c8b45a8.html\",\"urlToImage\":\"null\",\"publishedAt\":\"2021-11-20T13:13:12Z\",\"content\":\"La portavoz de la CUP en el Parlament, Eulàlia Reguant, ha anunciado que la formación anticapitalista ratifica la enmienda a la totalidad al proyecto de Presupuestos de la Generalitat para 2022.\\r\\nLo … [+531 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"García Egea proclama que el PP está \\\"fuerte y unido\\\" en torno a Juanma Moreno\",\"description\":\"El secretario general del PP, Teodoro García Egea, ha dado este sábado por superadas las diferencias entre las direcciones nacional y andaluza de su formación y ha proclamado...\",\"url\":\"https://www.elmundo.es/andalucia/2021/11/20/6198ec05e4d4d87f598b45dd.html\",\"urlToImage\":null,\"publishedAt\":\"2021-11-20T12:58:41Z\",\"content\":\"El secretario general del PP, Teodoro García Egea, ha dado este sábado por superadas las diferencias entre las direcciones nacional y andaluza de su formación y ha proclamado que el partido está \\\"fue… [+2835 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":\"El Mundo\",\"title\":\"Atlético de Madrid - Osasuna, en directo - Liga Santander\",\"description\":\"Toda la información actualizada al minuto por nuestros comentaristas Atlético de Madrid - Osasuna...\",\"url\":\"https://www.elmundo.es/eventos/en-directo/2021/11/20/98974-atletico-de-madrid-osasuna/\",\"urlToImage\":\"https://e00-elmundo.uecdn.es/eventos/en-directo/img/modelos/o/S/1528461315337_kVajp592wjtVKw0gpiCw_696x396.jpg\",\"publishedAt\":\"2021-11-20T11:30:00Z\",\"content\":\"Lucas Torró (Osasuna) ha recibido una falta en la zona defensiva.\\r\\nÁngel Correa (Atlético de Madrid) ha recibido una falta en campo contrario.\\r\\nFalta de Stefan Savic (Atlético de Madrid).\\r\\nDarko Bras… [+215 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":\"AFP\",\"title\":\"Miles de personas protestan en Viena contra el confinamiento y la vacunación obligatoria\",\"description\":\"Varias miles de personas se manifestaron este sábado en Viena, la capital austriaca, en contra del confinamiento y la vacunación obligatoria anunciados el viernes por el Gobierno...\",\"url\":\"https://www.elmundo.es/ciencia-y-salud/salud/2021/11/20/6198c1a6fdddff22198b45ec.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/9ad38070a1c2de826a4ddb8c7637560e/crop/308x205/2764x1842/re76545678size/1200/f/jpg/assets/multimedia/imagenes/2021/11/20/16374007291503.jpg\",\"publishedAt\":\"2021-11-20T09:36:44Z\",\"content\":\"Varias miles de personas se manifestaron este sábado en Viena, la capital austriaca, en contra del confinamiento y la vacunación obligatoria anunciados el viernes por el Gobierno para intentar frenar… [+1892 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":\"ISABEL VELLOSO | ISABEL MUNERA\",\"title\":\"Coronavirus hoy, última hora en directo | Sánchez apuesta por vacuna y mascarilla mientras el virus se\",\"description\":\"Sánchez apuesta por vacuna y mascarilla mientras el virus se expande en la UE El presiente del Gobierno, Pedro Sánchez, ha ratificado este sábado la a\",\"url\":\"https://www.elmundo.es/ciencia-y-salud/salud/2021/11/20/6198977ce5528d001ff8d65e-directo.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/7e3372892da8787a6978cd49bd85b51c/f/jpg/assets/multimedia/imagenes/2021/11/20/16373903820501.jpg\",\"publishedAt\":\"2021-11-20T07:02:05Z\",\"content\":\"Cataluña vuelve a registrar más de 100 pacientes en la UCI a causa del coronavirus (en concreto, 101) tras mes y medio, desde el pasado 12 de octubre, por debajo de esta cifra, al tiempo que ha notif… [+1124 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"Génova se revuelve contra sus críticos y denuncia que en el PP hay \\\"un golpe en marcha contra Pablo Casado\\\"\",\"description\":\"La dirección nacional del PP ha dicho &quot;basta&quot;. O, como le dijo Pablo Casado a Santiago Abascal en la moción de censura, &quot;hasta aquí hemos llegado&quot;. El...\",\"url\":\"https://www.elmundo.es/espana/2021/11/19/6197d18921efa05f728b45e3.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/d611f738024bbeef37cf063d8e9a9105/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/19/16373529193427.jpg\",\"publishedAt\":\"2021-11-19T21:48:39Z\",\"content\":\"Actualizado Viernes,\\r\\n19\\r\\nnoviembre\\r\\n2021\\r\\n-\\r\\n22:48\\r\\nLa dirección nacional del PP ha dicho \\\"basta\\\". O, como le dijo Pablo Casado a Santiago Abascal en la moción de censura, \\\"hasta aquí hemos llegado\\\"… [+286 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"Alfonso Pinilla García: \\\"Ignorar la ley de Amnistía cuestiona la legitimidad del modelo del 78\\\"\",\"description\":\"No esconde Alfonso Pinilla (Montijo, 1976) su preocupación por la actual crisis del modelo político que se dieron los españoles tras la muerte del general Franco un 20 de...\",\"url\":\"https://www.elmundo.es/opinion/2021/11/19/61969b14fc6c83192b8b45eb.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/463e8c83e26ba3e30575753540f62aaa/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/18/16372596650024.jpg\",\"publishedAt\":\"2021-11-19T21:48:26Z\",\"content\":\"Opinión\\r\\nActualizado Viernes,\\r\\n19\\r\\nnoviembre\\r\\n2021\\r\\n-\\r\\n22:48\\r\\nProfesor de Historia Contemporánea de la Universidad de Extremadura, acaba de publicar 'La Transición en España. España en transición' (A… [+194 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"China entorpece la exportación española de alimentos con aduanas más duras: \\\"Tenemos un follón gordo\\\"\",\"description\":\"Hay mucho dolor de cabeza estos días en la Oficina Económica y Comercial de la Embajada de España en Pekín. &quot;Tenemos un follón gordo con las aduanas chinas. Estamos...\",\"url\":\"https://www.elmundo.es/economia/macroeconomia/2021/11/19/6197dcfbfc6c83e7478b45d3.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/c8f79fda0b5fbb1419f19f28e7997bb6/crop/0x0/3072x2048/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/19/16373427264426.jpg\",\"publishedAt\":\"2021-11-19T21:48:23Z\",\"content\":\"Hay mucho dolor de cabeza estos días en la Oficina Económica y Comercial de la Embajada de España en Pekín. \\\"Tenemos un follón gordo con las aduanas chinas. Estamos desbordados de llamadas de empresa… [+233 chars]\"}]}";
        //String response = "{\"status\":\"ok\",\"totalResults\":10,\"articles\":[{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"La nueva edad de oro de la construcción: casi 10.000 empresas más entre la euforia y el fantasma de la burbuja\",\"description\":\"Cuando la burbuja inmobiliaria de 2008 vivía sus últimos destellos de esplendor, Leandro Flores, su hermano y otro socio lanzaron una empresa de revestimientos en Cortegana...\",\"url\":\"https://www.elmundo.es/economia/vivienda/2021/11/20/61968a6a21efa0141b8b45a8.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/9842111eed8b476567e5e2305b2b7e2e/crop/0x0/3072x2048/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/19/16373385646538.jpg\",\"publishedAt\":\"2021-11-20T17:04:38Z\",\"content\":\"Actualizado Sábado,\\r\\n20\\r\\nnoviembre\\r\\n2021\\r\\n-\\r\\n18:04\\r\\nCuando la burbuja inmobiliaria de 2008 vivía sus últimos destellos de esplendor, Leandro Flores, su hermano y otro socio lanzaron una empresa de re… [+9048 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"Sánchez defiende que con un \\\"mínimo esfuerzo\\\" en las cotizaciones se sostendrán y aumentarán las pensiones\",\"description\":\"El presidente del Gobierno, Pedro Sánchez, justificó este sábado el acuerdo con los sindicatos para incrementar una décima las cotizaciones sociales de los trabajadores...\",\"url\":\"https://www.elmundo.es/espana/2021/11/20/61990d5721efa0bf6f8b457f.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/d9ef9d55a4f6f807ecc39fcd0f03bca0/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/20/16374202483445.jpg\",\"publishedAt\":\"2021-11-20T14:59:46Z\",\"content\":\"El presidente del Gobierno, Pedro Sánchez, justificó este sábado el acuerdo con los sindicatos para incrementar una décima las cotizaciones sociales de los trabajadores remarcando que \\\"con ese mínimo… [+661 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"La CUP ratifica su enmienda a la totalidad al proyecto de Presupuestos del Govern\",\"description\":\"La portavoz de la CUP en el Parlament, Eulàlia Reguant, ha anunciado que la formación anticapitalista ratifica la enmienda a la totalidad al proyecto de Presupuestos de la...\",\"url\":\"https://www.elmundo.es/cataluna/2021/11/20/6198f463fdddff0e0c8b45a8.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/c9aca8f067beefaf3122addbb38f2518/crop/0x97/3072x2145/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/20/16374139387768.jpg\",\"publishedAt\":\"2021-11-20T13:13:12Z\",\"content\":\"La portavoz de la CUP en el Parlament, Eulàlia Reguant, ha anunciado que la formación anticapitalista ratifica la enmienda a la totalidad al proyecto de Presupuestos de la Generalitat para 2022.\\r\\nLo … [+531 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"García Egea proclama que el PP está \\\"fuerte y unido\\\" en torno a Juanma Moreno\",\"description\":\"El secretario general del PP, Teodoro García Egea, ha dado este sábado por superadas las diferencias entre las direcciones nacional y andaluza de su formación y ha proclamado...\",\"url\":\"https://www.elmundo.es/andalucia/2021/11/20/6198ec05e4d4d87f598b45dd.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/64835c7bb78f5e52b35e78ccf305aab4/crop/278x185/3072x2048/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/20/16374089343533.jpg\",\"publishedAt\":\"2021-11-20T12:58:41Z\",\"content\":\"El secretario general del PP, Teodoro García Egea, ha dado este sábado por superadas las diferencias entre las direcciones nacional y andaluza de su formación y ha proclamado que el partido está \\\"fue… [+2835 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":\"El Mundo\",\"title\":\"Atlético de Madrid - Osasuna, en directo - Liga Santander\",\"description\":\"Toda la información actualizada al minuto por nuestros comentaristas Atlético de Madrid - Osasuna...\",\"url\":\"https://www.elmundo.es/eventos/en-directo/2021/11/20/98974-atletico-de-madrid-osasuna/\",\"urlToImage\":\"https://e00-elmundo.uecdn.es/eventos/en-directo/img/modelos/o/S/1528461315337_kVajp592wjtVKw0gpiCw_696x396.jpg\",\"publishedAt\":\"2021-11-20T11:30:00Z\",\"content\":\"Lucas Torró (Osasuna) ha recibido una falta en la zona defensiva.\\r\\nÁngel Correa (Atlético de Madrid) ha recibido una falta en campo contrario.\\r\\nFalta de Stefan Savic (Atlético de Madrid).\\r\\nDarko Bras… [+215 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":\"AFP\",\"title\":\"Miles de personas protestan en Viena contra el confinamiento y la vacunación obligatoria\",\"description\":\"Varias miles de personas se manifestaron este sábado en Viena, la capital austriaca, en contra del confinamiento y la vacunación obligatoria anunciados el viernes por el Gobierno...\",\"url\":\"https://www.elmundo.es/ciencia-y-salud/salud/2021/11/20/6198c1a6fdddff22198b45ec.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/9ad38070a1c2de826a4ddb8c7637560e/crop/308x205/2764x1842/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/20/16374007291503.jpg\",\"publishedAt\":\"2021-11-20T09:36:44Z\",\"content\":\"Varias miles de personas se manifestaron este sábado en Viena, la capital austriaca, en contra del confinamiento y la vacunación obligatoria anunciados el viernes por el Gobierno para intentar frenar… [+1892 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":\"ISABEL VELLOSO | ISABEL MUNERA\",\"title\":\"Coronavirus hoy, última hora en directo | Sánchez apuesta por vacuna y mascarilla mientras el virus se\",\"description\":\"Sánchez apuesta por vacuna y mascarilla mientras el virus se expande en la UE El presiente del Gobierno, Pedro Sánchez, ha ratificado este sábado la a\",\"url\":\"https://www.elmundo.es/ciencia-y-salud/salud/2021/11/20/6198977ce5528d001ff8d65e-directo.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/7e3372892da8787a6978cd49bd85b51c/f/jpg/assets/multimedia/imagenes/2021/11/20/16373903820501.jpg\",\"publishedAt\":\"2021-11-20T07:02:05Z\",\"content\":\"Cataluña vuelve a registrar más de 100 pacientes en la UCI a causa del coronavirus (en concreto, 101) tras mes y medio, desde el pasado 12 de octubre, por debajo de esta cifra, al tiempo que ha notif… [+1124 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"Génova se revuelve contra sus críticos y denuncia que en el PP hay \\\"un golpe en marcha contra Pablo Casado\\\"\",\"description\":\"La dirección nacional del PP ha dicho &quot;basta&quot;. O, como le dijo Pablo Casado a Santiago Abascal en la moción de censura, &quot;hasta aquí hemos llegado&quot;. El...\",\"url\":\"https://www.elmundo.es/espana/2021/11/19/6197d18921efa05f728b45e3.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/d611f738024bbeef37cf063d8e9a9105/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/19/16373529193427.jpg\",\"publishedAt\":\"2021-11-19T21:48:39Z\",\"content\":\"Actualizado Viernes,\\r\\n19\\r\\nnoviembre\\r\\n2021\\r\\n-\\r\\n22:48\\r\\nLa dirección nacional del PP ha dicho \\\"basta\\\". O, como le dijo Pablo Casado a Santiago Abascal en la moción de censura, \\\"hasta aquí hemos llegado\\\"… [+286 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"Alfonso Pinilla García: \\\"Ignorar la ley de Amnistía cuestiona la legitimidad del modelo del 78\\\"\",\"description\":\"No esconde Alfonso Pinilla (Montijo, 1976) su preocupación por la actual crisis del modelo político que se dieron los españoles tras la muerte del general Franco un 20 de...\",\"url\":\"https://www.elmundo.es/opinion/2021/11/19/61969b14fc6c83192b8b45eb.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/463e8c83e26ba3e30575753540f62aaa/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/18/16372596650024.jpg\",\"publishedAt\":\"2021-11-19T21:48:26Z\",\"content\":\"Opinión\\r\\nActualizado Viernes,\\r\\n19\\r\\nnoviembre\\r\\n2021\\r\\n-\\r\\n22:48\\r\\nProfesor de Historia Contemporánea de la Universidad de Extremadura, acaba de publicar 'La Transición en España. España en transición' (A… [+194 chars]\"},{\"source\":{\"id\":\"el-mundo\",\"name\":\"El Mundo\"},\"author\":null,\"title\":\"China entorpece la exportación española de alimentos con aduanas más duras: \\\"Tenemos un follón gordo\\\"\",\"description\":\"Hay mucho dolor de cabeza estos días en la Oficina Económica y Comercial de la Embajada de España en Pekín. &quot;Tenemos un follón gordo con las aduanas chinas. Estamos...\",\"url\":\"https://www.elmundo.es/economia/macroeconomia/2021/11/19/6197dcfbfc6c83e7478b45d3.html\",\"urlToImage\":\"https://phantom-elmundo.unidadeditorial.es/c8f79fda0b5fbb1419f19f28e7997bb6/crop/0x0/3072x2048/resize/1200/f/jpg/assets/multimedia/imagenes/2021/11/19/16373427264426.jpg\",\"publishedAt\":\"2021-11-19T21:48:23Z\",\"content\":\"Hay mucho dolor de cabeza estos días en la Oficina Económica y Comercial de la Embajada de España en Pekín. \\\"Tenemos un follón gordo con las aduanas chinas. Estamos desbordados de llamadas de empresa… [+233 chars]\"}]}";
        String response = "{\"status\":\"ok\",\"totalResults\":10,\"articles\":[{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"تغيرات كبار الملاك في السوق السعودي \\\"تاسي\\\" ليوم الأربعاء 24 نوفمبر (صناعة الورق - ذيب - أمانة للتأمين)\",\"description\":\"تغيرات كبار الملاك في السوق السعودي \\\"تاسي\\\" ليوم الأربعاء 24 نوفمبر (صناعة الورق - ذيب - أمانة للتأمين)\",\"url\":\"https://www.argaam.com/ar/reports/major-shareholders/26069?preview=true\",\"urlToImage\":\"https://www.argaam.com/content/ar/images/argaam-plus-ar.jpg\",\"publishedAt\":\"2021-11-28T18:52:20.4622291Z\",\"content\":null},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"تغيرات ملكية المستثمرين الأجانب بالسوق السعودي يوم الأربعاء 24 نوفمبر.. ارتفاع الملكية في 81 شركة وانخفاضها في 71 شركة\",\"description\":\"تغيرات ملكية المستثمرين الأجانب بالسوق السعودي يوم الأربعاء 24 نوفمبر.. ارتفاع الملكية في 81 شركة وانخفاضها في 71 شركة\",\"url\":\"https://www.argaam.com/ar/reports/company-foreign-ownership/26068?preview=true\",\"urlToImage\":\"https://www.argaam.com/content/ar/images/argaam-plus-ar.jpg\",\"publishedAt\":\"2021-11-28T18:22:19.507307Z\",\"content\":null},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"انخفاض موجودات البنك المركزي السعودي إلى 1852.5 مليار ريال (- 38 مليار ريال) خلال شهر أكتوبر 2021\",\"description\":\"\",\"url\":\"https://www.argaam.com/ar/stats-report-assets-sama/3/26065?preview=true\",\"urlToImage\":\"https://www.argaam.com/content/ar/images/argaam-plus-ar.jpg\",\"publishedAt\":\"2021-11-28T14:52:23.9114813Z\",\"content\":null},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"انخفاض أرباح \\\"البنوك العاملة في السعودية\\\" إلى 4.61 مليار ريال (- 3.3 %) خلال شهر أكتوبر 2021\",\"description\":\"\",\"url\":\"https://www.argaam.com/ar/stats-report-bank-sama/3/26064?preview=true\",\"urlToImage\":\"https://www.argaam.com/content/ar/images/argaam-plus-ar.jpg\",\"publishedAt\":\"2021-11-28T14:22:28.0229258Z\",\"content\":null},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"اكتتاب \\\"مجموعة تداول السعودية\\\": تحديد سعر طرح السهم بـ 105 ريالات\",\"description\":\"أعلنت مجموعة تداول السعودية، عن تحديد سعر طرح أسهمها للاكتتاب العام، وذلك بـ 105 ريالات للسهم الواحد. \\r\\n\\r\\nوكانتعملية بناء سجل الأوامر قد امتدت ل\",\"url\":\"http://www.argaam.com/ar/article/articledetail/id/1515561\",\"urlToImage\":\"https://argaamplus.s3.amazonaws.com/79072ed1-41c2-47f4-a4ec-eef6b97e542c.png\",\"publishedAt\":\"2021-11-28T12:00:00Z\",\"content\":\"105 .  \\r\\n  6 21 26 2021    \\\" \\\" 95 105 . \\r\\n\\\"\\\" 30 2021 2 2021.  \\r\\n 10.80    30 %    36 30 % 1.2 .\"},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"هيئة السوق: ارتفاع حجم الأصول المدارة لدى المؤسسات المالية المرخصة إلى 740 مليار ريال (+5%) بنهاية الربع الثالث 2021\",\"description\":\"نشرت هيئة السوق المالية مؤخرا تقريراً تفصيلياً عن أعمال مؤسسات السوق المالية المرخصة من الهيئة خلال الربع الثالث 2021.\\r\\n\\r\\n\\r\\n\\r\\nووفقا لبيانات الهي\",\"url\":\"http://www.argaam.com/ar/article/articledetail/id/1515419\",\"urlToImage\":\"https://argaamplus.s3.amazonaws.com/de170fbc-fa50-45ad-ac38-9ff027854217.png\",\"publishedAt\":\"2021-11-28T12:00:00Z\",\"content\":\"2021.\\r\\n 2021 740.02 5% 35.6 2021.\\r\\n 2018:\\r\\n<table><tr><td> ( )\\r\\n</td></tr><tr><td></td><td></td><td> ( )\\r\\n</td><td></td></tr><tr><td> 2018\\r\\n</td><td>395.82\\r\\n</td><td>+ 4.74\\r\\n</td><td>+ 1 %\\r\\n</td></tr… [+8171 chars]\"},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"السوق السعودي: 177 مليون ريال صافي مبيعات الشركات السعودية خلال الأسبوع الماضي و 436 مليون ريال صافي مبيعات الأجانب المؤهلين\",\"description\":\"أعلنت السوق المالية السعودية \\\"تداول\\\" أن صافي مبيعات الشركات السعودية خلال الأسبوع الماضي المنتهي في 25 نوفمبر 2021، قد بلغ نحو 177 مليون ريال.\",\"url\":\"http://www.argaam.com/ar/article/articledetail/id/1515564\",\"urlToImage\":\"https://argaamplus.s3.amazonaws.com/fbd35a74-498c-448d-8781-6b706b795e90.png\",\"publishedAt\":\"2021-11-28T12:00:00Z\",\"content\":null},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"رئيس هيئة السوق: شركات التمويل الجماعي من أنجح شركات \\\"الفنتك\\\" خلال الفترة الماضية\",\"description\":\"\\\"محمد القويز\\\" رئيس مجلس هيئة السوق المالية\\r\\n\\r\\n\\r\\nقال الأستاذ محمد القويز، رئيس مجلس هيئة السوق المالية،إن من أنجح شركات \\\"الفنتك\\\" خلال الفترة الماضي\",\"url\":\"http://www.argaam.com/ar/article/articledetail/id/1515567\",\"urlToImage\":\"https://argaamplus.s3.amazonaws.com/fdf54c11-bf80-49c9-9c07-52493e79a83f.png\",\"publishedAt\":\"2021-11-28T12:00:00Z\",\"content\":null},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"السوق السعودي: القيمة السوقية للأسهم تتراجع إلى 9954.3 مليار ريال (-3.3 %) بنهاية الأسبوع الماضي.. وملكية المستثمر الأجنبي تشكل 3 % منها\",\"description\":\"شاشة تداول السوق السعودي\\r\\n\\r\\n\\r\\nأعلنت السوق المالية السعودية \\\"تداول\\\" التقرير الأسبوعي لقيمة ملكية المستثمرين ونسبتها من القيمة الكلية، وذلك حسب الجن\",\"url\":\"http://www.argaam.com/ar/article/articledetail/id/1515574\",\"urlToImage\":\"https://argaamplus.s3.amazonaws.com/0585fa78-7511-48ce-bdcd-7ade21656a3e.png\",\"publishedAt\":\"2021-11-28T12:00:00Z\",\"content\":\"\"},{\"source\":{\"id\":\"argaam\",\"name\":\"Argaam\"},\"author\":\"Argaam\",\"title\":\"تغطية اكتتاب حقوق أولوية \\\"ميدغلف\\\" بنسبة 82.15 %\",\"description\":\"أعلنت شركة المتوسط والخليج للتامين وإعادة التأمين التعاوني \\\"ميدغلف\\\"، عن نتائج تداول حقوق الأولوية والاكتتاب في الأسهم الجديدة وتفاصيل عملية بيع\",\"url\":\"http://www.argaam.com/ar/article/articledetail/id/1515526\",\"urlToImage\":\"https://argaamplus.s3.amazonaws.com/9468c022-5b16-46d2-8ecf-873cb2c25c3e.png\",\"publishedAt\":\"2021-11-28T12:00:00Z\",\"content\":null}]}";
        this.observable.onArticlesLoaded(response);
    }
}